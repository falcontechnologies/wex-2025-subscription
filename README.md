# Work Experience 2025 - Subscription Manager

> Project: wex-2025 Work Experience
>
> Purpose: A second attempt at a Subscription Manager to keep track of
> recurring subscriptions
>
> Description: A collection of records that track the subscription attributes,
> defined in a data model and provides a way to query and view the collection

----
## Introduction

Subscription Manager Version 2 is a **Node.JS** application using the
**Next.JS** framework and the **SQLite** embedded database to provide
a durable record of subscriptions and their attributes.
---

## Prerequisites:

A Linux like command line interface. If you are using Windows OS, install the WSL component

Ensure that node.js is installed. It is recommended that you use a command line installation
rather than a binary installer. This will be 'apt' for Linux or WSL, assuming Ubuntu
Linux. For Mac OSX, HomeBrew is recommended.

Refer to the appropriate documentation

https://nodejs.org/en/
https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-20-04
https://brew.sh


Autogenerated project using the command
``` bash
npx create-next-app@latest wex-2025-subscription
```
---
## Project Set Up:

### Note

The application has had several things done to expedite the work experience.

If you are starting this from a blank project with no files other than those
generated from the create-next-app... above, several additional steps have
already been completed to this project. 

Here are those steps - not required, only for reference.

To start from scratch, ensure that NodeJS, NPM/NPX are installed.
The versions used at the start of this project are
Node: v23.11.0
NPM/NPX: 11.4.1

You can determine the version at the command line with

```bash
node --version
AND
npm --version

npx --version
```

Switch to your local working directory. The project will be created in a
new directory here.

At the command line, you can use

```bash
npx create-next-app@wex-2025-subscription
```

You will get a series of No/Yes questions. Select all 'Yes'
except the ...customize the import alias... Leave that as
a 'No'.

You will now have a working Next.js application in the wex-2025-subscription
and have it set up for git.

Change to this application directory

``` bash
cd wex-2025-subscription
```

Additional steps that are taken:

1. Update the README.md to reflect this work.
2. Update the package.json file with packages used to configure the database
3. Update the ./prisma/schema.prisma file to have the correct data model
4. Run several command line steps to install the packages and set up the database
5. Create default data and apply it to the database

```bash
npm install
# JavaScript/TypeScript packages installed to node_modules
npx prisma init  --datasource-provider sqlite
# directory ./prisma created 
cd prisma

touch dev.db
# empty database file created

cd ../
# edit the schema file ./prisma/schema.prisma and add seed data
# files under the ./prisma/seed/ directory

npx prisma db push
# empty database with schema created, .env file created to point
# to the database
```
Note that output messages suggest that you introspect the database schema
to ensure that it is in the correct prisma format. As well, the db push
command appears to generate the client. To be certain, the generate step
is manually run.

``` bash
npx prisma generate
# generates the Prisma client in the ./src/generated directory
```

The files creating default data were created in ./prisma/seed/ and
./prisma/seed/data as part of step 5 above.

Now add the default data to the database

``` bash
npm run db-seed
# seed the database with some data.
# note that the command is npx prisma db <filename>
# The command is created in package.json
```
You can confirm that the database schema has been applied and the data
added to the database using the web app interface to prisma

``` bash
npx prisma studio
# database examination tool for SQLite
```

This will open a new tab in your browser.

As with most things on the Internet, most websites are incorrect or
outdated, particularly with respect to the seed data functionality of
prisma.

---
## WARNING: Shortcuts Taken

To make it easier to get developers going, there are several files or
directories added to the git project that are not considered best
practice. In other words, some things were added that generally 
should not be added to the committed files.

Here is the list

.env file
./src/generated
./prisma/dev.db

Note that you should try to avoid committing any of these files back to
the git repository. Ask first.

---
## Development Notes

When modifying the model or making changes that require re-seeding the
data, there are a few commands that will need to be known to get things
done.

``` bash 
npx prisma db push --force-reset
# update the schema to reflect the contents of the schema.prisma file
# it also removes all data from the database. Use with care.
```

---
## Getting Started Running the App

First, run the development server:

```bash
npm run dev
# Should automatically open a new default browser tab to the local address
# running on port 3000)
```
While you can use other package managers like yarn, pnpm or bun, only
npm command is provided.

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `./src/app/page.tsx`.
The page auto-updates as you edit the file.
---
## Project Requirements and Design

Several design attempts were made using Python that were unsuccessful.
The base configuration of this project builds on those attempts.

The data model has a subscription table that stores data. It has fields
subscription_id, name, provider, start_date, expiry_date, payment_period,
payment_amount, is_recurring, is_trial, is_active, subscription_type
and modification timestamp.

The data model has an event table that stores event data. It has fields
event_id, subscription_id, payment_id, amount, and date.

The data model has a payment method table that stores payment types. It has
fields payment_id, payment_type, name, payment expiry date. The payment types
re a list of Debit, Credit, Paypal and Other with only one selection possible.

The application should allow a user to add, edit, delete and view values in the
payment method table.

The application should allow a user to add, edit and view values in the
subscription table.

On application start up, the default view is of the subscription table
ordered by the expiry_date and is_active fields.

The add, edit and delete functionality should have a button per row. An icon can
be used.

A button to view the payment table will open a dialog that has a view of the
payment table and the ability to add, edit and delete payment rows.

A button to view the events table will change the view to the events table
with rows sorted by the most recent event first. A button to return to the
subscription view will change the view to the subscriptions table. No editing
or deleting of events will be permitted.

---
## Other References

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and
load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!
